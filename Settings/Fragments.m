function Fragments = Fragments(Sim)##  if isempty(Sim.Fragments)##    Fragments = struct();##  else##    Fragments = Sim.Fragments;##  endif  Fragments = Sim.Fragments;    do    msgboxHandle = msgbox("hi");##    set(msgboxHandle,'position',(tmp=get(gca,'position')) + [tmp(3) 0 0 0])    choice = menu("Fragments", {"new", "edit..", "delete..", "save"});    if ishandle(msgboxHandle)      delete(msgboxHandle);    endif
    switch choice      case 0##        if isempty(Sim.Fragments)##          Fragments = struct();##        else##          Fragments = Sim.Fragments;##        endif        Fragments = Sim.Fragments;      case 1        Fragments = [Fragments,NewFragments(length(Fragments)+1)];      case 2        if !isempty(Fragments)          myOptions = {};          for i = 1:length(Fragments)            myOptions(end+1) = Fragments(i).Name;          endfor
          [indx,Ok] = listdlg("ListString", myOptions, "SelectionMode", "Single");          if Ok            Fragments(indx) = NewFragments(Fragments(indx));          endif        else          waitfor(msgbox("No lists to edit."));        endif      case 3        if !isempty(Fragments)          myOptions = {};          for i = 1:length(Fragments)            myOptions(end+1) = Fragments(i).Name;          endfor          indx = listdlg("ListString", myOptions, "SelectionMode", "Multiple");          Fragments = Fragments(setxor([1:columns(Fragments)], indx));        else          waitfor(msgbox("No lists to delete."));        endif    endswitch
  until choice == 0 || choice == 4endfunction